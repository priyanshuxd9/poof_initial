
# Poof - Ephemeral Group Chats

Poof is a modern web application for creating temporary, self-destructing group chats. It provides a secure and private platform for conversations that automatically disappear after a user-defined timer, ensuring that what's said in Poof, stays in Poof... and then vanishes.

## Core Features

### Authentication & Security
-   **Flexible Sign-In/Sign-Up**: Users can create an account or sign in using an email, a unique username, and a password.
-   **Passwordless Magic Links**: For quick and secure access, users can opt for a "magic link" sent to their email, eliminating the need for a password.
-   **Secure Sessions**: User sessions are securely managed using Firebase Authentication.
-   **Password Reset**: A straightforward password reset flow is available for users who forget their credentials.
-   **Backend Data Cleanup**: A Cloud Function automatically and securely deletes all of a user's associated data (profile, groups, messages, stored files) when their account is deleted.

### User Customization & Profiles
-   **Personalized Profiles**: Users can update their username at any time, which is then reflected across all their groups.
-   **Custom Avatars**: Upload a custom profile picture. The app automatically compresses the image on the client-side before upload to save bandwidth and storage space.
-   **Dynamic Avatars**: User avatars and usernames update instantly in chat and member lists if a user changes their profile details.

### Group Creation & AI Assistance
-   **Simple Group Setup**: Easily start new groups with a name, description, an optional custom icon, and a mandatory self-destruct timer.
-   **AI-Powered Description Generation**: Don't know what to write? Get a creative, engaging group description generated by AI based on the group's name, purpose, and theme.
-   **AI Timer Suggestions**: Get an AI-driven suggestion for an appropriate self-destruct timer duration (from 1 to 31 days) based on the group's topic.

### Real-Time Group Chat
-   **Instant Messaging**: Send and receive messages in real-time, powered by Firestore's live listeners.
-   **Media Sharing**: Share images (PNG, JPG, WebP) and files (PDF, DOC, TXT). Images are automatically compressed before upload.
-   **Emoji Reactions**: React to any message with a selection of popular emojis. The app shows who reacted with which emoji.
-   **System Messages**: The chat automatically posts messages when a user joins or leaves the group, keeping all members informed.
-   **Full-Screen Media Viewer**: Click on any image in the chat to view it in a full-screen, immersive dialog.
-   **Link Detection**: URLs posted in chat automatically become clickable links.

### Group Management & Info
-   **Detailed Info Page**: Each group has a dedicated page to view its name, description, creator, and a full list of members with their avatars.
-   **Owner-Specific Controls**: The group creator has exclusive rights to:
    -   Adjust the self-destruct timer.
    -   Trigger an immediate "Poof" to archive the group instantly.
    -   Change the group's icon.
-   **Leave Group**: Members can leave groups at any time. (Note: Owners cannot leave; they must "Poof" the group).
-   **Easy Invites**: Seamlessly join existing groups using a unique, shareable 8-character invite code.
-   **Centralized Media Gallery**: A dedicated tab on the info page organizes all images and files shared in the group for easy access.

### Dashboard & Navigation
-   **Personalized Dashboard**: A central hub lists all of a user's active groups.
-   **Sorted by Urgency**: Groups are automatically sorted by their expiration date, showing which ones will "Poof" the soonest.
-   **Floating Action Button (FAB)**: A convenient "speed dial" button provides quick access to create or join a group from the dashboard.
-   **Past Groups Archive**: A dedicated page lists all previously joined groups that have self-destructed, providing a history of past conversations.

### UI/UX & Accessibility
-   **Light & Dark Modes**: Full support for light and dark themes, with an option to follow the system preference.
-   **Customizable Font Size**: Users can adjust the base font size for the entire application for better readability.
-   **Responsive Design**: The interface is fully responsive and works seamlessly on desktop and mobile devices.
-   **Professional Feel**: The UI is built with polished ShadCN components, featuring smooth transitions, toasts, and notifications for a clean user experience.

## Tech Stack

This project is built with a modern, robust tech stack:

-   **Frontend**:
    -   **Next.js**: React framework for server-side rendering and static site generation (using App Router).
    -   **React**: JavaScript library for building user interfaces.
    -   **TypeScript**: Superset of JavaScript that adds static typing.
-   **UI & Styling**:
    -   **ShadCN UI**: Re-usable UI components built on Radix UI and Tailwind CSS.
    -   **Tailwind CSS**: A utility-first CSS framework for rapid UI development.
    -   **Custom SVG Logo**: Using an inline SVG for the main application logo.
-   **Backend & Database**:
    -   **Firebase**:
        -   **Authentication**: Manages user sign-up, sign-in, and sessions.
        -   **Firestore**: NoSQL database for storing group information, messages, and user data.
        -   **Storage**: For storing user profile pictures and group icons.
        -   **Cloud Functions**: For server-side logic like user data cleanup on account deletion.
-   **Artificial Intelligence**:
    -   **Genkit (by Firebase)**: Toolkit for building AI-powered features, connected to Google's Gemini models.
-   **State Management**:
    -   React Context API (for global authentication state).
-   **Forms**:
    -   React Hook Form with Zod for robust form validation.
-   **Utilities**:
    -   `browser-image-compression`: For client-side image compression to reduce storage and bandwidth.
    -   `date-fns`: For elegant and reliable date formatting.

## Styling Guidelines

The app aims for a clean, modern, and user-friendly interface:

-   **Primary Color**: Calming Blue (`#5BB3D4`, `hsl(198 56% 59%)`) - Fosters trust and reliability.
-   **Background Color**: Light Desaturated Blue (`#E3F2FD`, `hsl(202 93% 94%)`) - Clean and unobtrusive.
-   **Accent Color**: Dark Blue (`#0B4763`, `hsl(201 81% 21%)`) - Highlights interactive elements and important notifications.
-   **Font**: Poppins - Clean and readable for clear communication.
-   **Icons**: A custom SVG logo and Lucide React for UI icons.

## Getting Started

Follow these steps to set up and run the project locally.

### Prerequisites

-   Node.js (v18 or later recommended)
-   npm or yarn
-   A Firebase project

### 1. Firebase Project Setup

Before running the app, you need to set up a Firebase project:

1.  Go to the [Firebase Console](https://console.firebase.google.com/) and create a new project.
2.  In the project dashboard, go to the **Build** section in the left sidebar.
3.  **Authentication**:
    -   Enable Authentication.
    -   On the **Sign-in method** tab, click **Add new provider** and select **Email/Password**.
    -   Enable the **Email/Password** provider toggle.
    -   Crucially, also enable the **Email link (passwordless sign-in)** toggle within the same provider section.
    -   Go to the **Settings** tab. Under **Authorized domains**, click **Add domain** and ensure the domain your app is running on is listed (e.g., `localhost` for local development, or your app's live domain). **This is required for Magic Link sign-in to work.**
    -   Save the changes.
4.  **Firestore Database**:
    -   Create a new Firestore database.
    -   Start in **production mode**. This is crucial for security.
    -   After creation, go to the **Rules** tab, delete the default rules, and paste the entire content of the `firestore.rules` file from this repository. Publish the changes.
5.  **Storage**:
    -   Enable Cloud Storage.
    -   Follow the prompts to create a storage bucket.
    -   After creation, go to the **Rules** tab, delete the default rules, and paste the entire content of the `storage.rules` file from this repository. Publish the changes.
6.  **Get Web App Credentials**:
    -   Go to your Project Settings (click the gear icon).
    -   In the "General" tab, scroll down to "Your apps".
    -   Click the `</>` icon to add a new Web app.
    -   Give it a nickname and register the app.
    -   Firebase will provide you with a `firebaseConfig` object. You will need these values for the next step.

### 2. Local Installation

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/your-username/poof-app.git
    cd poof-app
    ```

2.  **Install dependencies**:
    ```bash
    npm install
    # or
    yarn install
    ```

3.  **Set up Environment Variables**:
    Create a `.env` file in the root of the project and populate it with your Firebase and Google AI credentials.

    ```env
    # Firebase Configuration - Get these from your Firebase project settings
    NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
    NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_auth_domain
    NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
    NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_storage_bucket
    NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_messaging_sender_id
    NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id

    # For Genkit (Google AI Studio / Vertex AI)
    # Get this from https://aistudio.google.com/app/apikey
    GOOGLE_API_KEY=your_google_ai_api_key
    ```

### 3. Running the Application

This project requires two separate development servers to be running simultaneously: one for the Next.js frontend and one for the Genkit AI backend.

1.  **Run the Next.js development server**:
    This command starts the main application.
    ```bash
    npm run dev
    ```
    The application will be accessible at `http://localhost:3000`.

2.  **Run the Genkit development server**:
    Open a **new terminal window** in the same project directory and run:
    ```bash
    npm run genkit:watch
    ```
    This starts the Genkit server (typically on `http://localhost:4000`) and watches for changes in your AI flow files.

You're all set! You can now access the app in your browser.

## Project Structure

-   `src/app/`: Next.js App Router pages and layouts.
    -   `(app)/`: Authenticated routes (dashboard, groups, profile, etc.).
    -   `auth/`: Authentication pages (sign-in).
    -   `layout.tsx`: The root layout for the entire application.
    -   `page.tsx`: The landing page that redirects users.
-   `src/components/`: Reusable UI components.
    -   `auth/`: Authentication form.
    -   `chat/`: Components for the chat interface (message list, input, header).
    -   `groups/`: Components for group creation and joining.
    -   `shared/`: Common components like the Logo and AppHeader.
    -   `ui/`: ShadCN UI components (Button, Card, etc.).
-   `src/contexts/`: React Context API for global state (e.g., `auth-context.tsx`).
-   `src/hooks/`: Custom React hooks (`use-toast.ts`, `use-mobile.ts`).
-   `src/lib/`: Core utilities and Firebase setup (`firebase.ts`, `utils.ts`).
-   `src/ai/`: Genkit configuration and AI flows.
    -   `flows/`: Specific AI-powered flows (e.g., `generate-group-description.ts`).
    -   `genkit.ts`: Genkit initialization.
-   `functions/`: Firebase Cloud Functions for backend tasks.
-   `firestore.rules`: Security rules for the Firestore database.
-   `storage.rules`: Security rules for Cloud Storage.
-   `public/`: Static assets.
-   `tailwind.config.ts`: Tailwind CSS configuration.

## Available Scripts

-   `npm run dev`: Starts the Next.js development server.
-   `npm run build`: Builds the application for production.
-   `npm run start`: Starts a Next.js production server.
-   `npm run lint`: Lints the project files.
-   `npm run typecheck`: Runs TypeScript type checking.
-   `npm run genkit:dev`: Starts the Genkit development server.
-   `npm run genkit:watch`: Starts the Genkit development server with file watching.
